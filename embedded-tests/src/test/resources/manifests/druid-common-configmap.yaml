apiVersion: v1
kind: ConfigMap
metadata:
  name: druid-common
  namespace: druid
data:
  common.runtime.properties: |
    druid.zk.service.host=druid-zookeeper
    druid.metadata.storage.type=postgresql
    druid.metadata.storage.connector.connectURI=jdbc:postgresql://druid-postgres:5432/druid
    druid.metadata.storage.connector.user=druid
    druid.metadata.storage.connector.password=druid
    druid.storage.type=local
    druid.storage.storageDirectory=/opt/druid/var/druid/segments
    druid.indexer.logs.type=file
    druid.indexer.logs.directory=/opt/druid/var/druid/indexing-logs
    druid.extensions.loadList=["postgresql-metadata-storage"]

  coordinator.runtime.properties: |
    druid.host=druid-coordinator-overlord
    druid.coordinator.asOverlord.enabled=true
    druid.coordinator.asOverlord.overlordService=druid/overlord

  broker.runtime.properties: |
    druid.host=druid-broker
    druid.lookup.enableLookupSyncOnStartup=false
    druid.processing.buffer.sizeBytes=10MiB
    druid.processing.numMergeBuffers=2
    druid.processing.numThreads=5

  historical.runtime.properties: |
    druid.host=druid-historical
    druid.segmentCache.locations=[{"path":"/opt/druid/var/segment-cache","maxSize":"50M"}]
    druid.processing.buffer.sizeBytes=10MiB
    druid.processing.numMergeBuffers=2
    druid.processing.numThreads=5

  middlemanager.runtime.properties: |
    druid.host=druid-middlemanager
    druid.processing.buffer.sizeBytes=10MiB
    druid.processing.numMergeBuffers=2
    druid.processing.numThreads=5

  router.runtime.properties: |
    druid.random=ignore
    druid.router.managementProxy.enabled=true
